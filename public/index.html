
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>BlockCraft</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;

				user-select: none;
			}

			body {
				background-color: #ffffff;
				margin: 0;
				overflow: hidden;
				font-family: arial;

			}

			@font-face {
			    font-family: 'Minecraft-Regular';
			    src: url('https://blockcraft.victorwei.com/Minecraft-Regular.otf');
			}

			#blocker {
				position: absolute;

				width: 100%;
				height: 100%;

				text-align: center;
				/*background-color: black;
				background-image: url("https://blockcraft.victorwei.com/textures/blocks/dirt.png");
				background-repeat: repeat;*/
				z-index: 3;

				font-family: "Minecraft-Regular";
				font-size: 20px;
			}

			#canvas-hud {
				position: absolute;
				z-index: 0;
				padding: 0;
				margin: 0;
			}

			#text {
				position: absolute;
				z-index: 2;
				color: limegreen;
			}

			#title {
				font-family: "Minecraft-Regular";
				font-size: 100px;
				color: white;
			}

			#instructions-text {
				color: white;
			}

			.slider-text {
				color: white;
			}

			.slider {
			    -webkit-appearance: none;
			    appearance: none;
			    width: 100%; 
			    height: 15px;
			    background: #d3d3d3; 
			    outline: none;
			    opacity: 1;
			    -webkit-transition: .2s;
			    transition: opacity .2s;
			}

			.slider::-webkit-slider-thumb {
			    -webkit-appearance: none; 
			    appearance: none;
			    width: 20px; 
			    height: 20px; 
			    background: green; 
			    cursor: pointer; 
			}

			#settings {
				position: absolute;
				padding: 20px;
				width: 50%;
				left: 50vw;
				top: 20%;
				margin-left: -25vw;
				text-align: left;
				background-color: rgba(0, 0, 0, 0.5);
			}

			#name-input {
				width: 20vw;
				height: 4vw;
				font-size: 2vw;
			}

			#name-container {
				width: 100%;
				text-align: center;
			}

			#start-button {
				width: 20vw;
				height: 5vw;
				text-decoration: none;
				border: none;
				outline: none;
				background-color: #d3d3d3;
				cursor: pointer;
				font-size: 40px;
				margin: 0 auto;
			}

			#chat-input {
				position: absolute;
				left: 5px;
				bottom: 5px;
				height: 35px;
				width: calc(100% - 10px);
				z-index: 2;
				border: none;
				font-family: "Minecraft-Regular";
				font-size: 25px;
				padding-left: 5px;
				text-decoration: none;
				outline: none;
				background-color: rgba(0, 0, 0, 0);
				color: white;
			}

			#chat-input::placeholder {
				color: white;
			}

		</style>
		<link rel="shortcut icon" type="image/png" href="https://blockcraft.victorwei.com/favicon.png"/>
	</head>
	<body>
		<script src="https://cdn.jsdelivr.net/npm/ola"></script>

		<!-- Load Resources -->
		<script src="javascripts/resources/three.min.js"></script>
		<script src="javascripts/resources/SVGLoader.js"></script>
		<script src="javascripts/resources/socket.io.js"></script>
		<script src="javascripts/resources/stats.min.js"></script>
		<script src="javascripts/resources/perlin.js"></script>
		<script src="javascripts/resources/simplex.js"></script>
		<script src="javascripts/resources/matrix.js"></script>
		<script src="javascripts/resources/sizeof.js"></script>
		<script src="javascripts/resources/jquery.js"></script>
		<script src="javascripts/resources/rle-encoding.js"></script>

		<!-- Load Postprocessing -->
		<script src="javascripts/postprocessing/EffectComposer.js"></script>
		<script src="javascripts/postprocessing/BloomPass.js"></script>
		<script src="javascripts/postprocessing/RenderPass.js"></script>
		<script src="javascripts/postprocessing/ShaderPass.js"></script>
		<script src="javascripts/postprocessing/CopyShader.js"></script>
		<script src="javascripts/postprocessing/UnrealBloomPass.js"></script>
		<script src="javascripts/postprocessing/LuminosityHighPassShader.js"></script>

		<!-- Load Classes -->
		<script src="javascripts/classes/World.js"></script>
		<script src="javascripts/classes/Player.js"></script>
		<script src="javascripts/classes/Stats.js"></script>
		<script src="javascripts/classes/Recipes.js"></script>

		<!-- Load Game Files -->
		<script src="javascripts/pointerlock.js"></script>
		<script src="javascripts/textures.js"></script>
		<script src="javascripts/server.js"></script>
		<script src="javascripts/lights.js"></script>
		<script src="javascripts/core.js"></script>
		<script src="javascripts/client.js"></script>
		<script src="javascripts/input.js"></script>
		<script src="javascripts/helper.js"></script>
		<script src="javascripts/hud.js"></script>
		<script src="javascripts/svg.js"></script>
		
		<canvas id="canvas-hud"></canvas>

		<div id="blocker">

			<h1 id="title">BlockCraft</h1>

			<div id="settings">
				<span id="sensitivityValue" class="slider-text">Sensitivity: 0.5</span>
				<input type="range" min="1" max="100" value="50" class="slider" id="sensitivitySlider" style="position: relative; float: right; width: 50%; height: 20px">
				<br />
				<br />
				<span id="renderDistanceValue" class="slider-text">Render Distance: 8</span>
				<input type="range" min="1" max="32" value="8" class="slider" id="renderDistanceSlider" style="position: relative; float: right; width: 50%; height: 20px">
				<br />
				<br />
				<span id="chunkLoadingRateValue" class="slider-text">Chunk Loading Rate: 1</span>
				<input type="range" min="0" max="10" value="1" class="slider" id="chunkLoadingRateSlider" style="position: relative; float: right; width: 50%; height: 20px">
				<br />
				<br />
				<span id="statsValue" class="slider-text">Statistics: ON</span>
				<input type="range" min="0" max="1" value="1" class="slider" id="statsSlider" style="position: relative; float: right; width: 40px; height: 20px">
				<br />
				<br />
				<span id="shadowValue" class="slider-text">Shadow Effect: OFF</span>
				<input type="range" min="0" max="1" value="0" class="slider" id="shadowSlider" style="position: relative; float: right; width: 40px; height: 20px">
				<br />
				<br />
				<span id="cloudValue" class="slider-text">Clouds: ON</span>
				<input type="range" min="0" max="1" value="1" class="slider" id="cloudSlider" style="position: relative; float: right; width: 40px; height: 20px">

				<p id="instructions-text">WASD to move. Shift to run. L-Alt to Sneak. R to respawn. E to open inventory. F to fly. Not affliated with Mojang.</p>

				<div id ="name-container">
					<input id="name-input" type="text" placeholder="Enter Username" maxlength="20">
					<br />
					<button id="start-button">Loading...</button>
				</div>
			</div>
		</div>

		<input id="chat-input" type="text" placeholder="> Press Enter to Chat" maxlength="100">

		<script type="x-shader/x-vertex" id="vertexshader">

			varying vec2 vUv;

			void main() {

				vUv = uv;

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			}

		</script>

		<script type="x-shader/x-fragment" id="fragmentshader">

			uniform sampler2D baseTexture;
			uniform sampler2D bloomTexture;

			varying vec2 vUv;

			void main() {

				gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );

			}

		</script>

		<script>

			// Remove warning
			var originalWarning = console.warn; // back up the original method
			console.warn = function(){}; // now warnings do nothing!

			// Sensitivity

			$("#sensitivitySlider").on("change mousemove", function (e) {
				sens = $("#sensitivitySlider")[0].value/100;
				$("#sensitivityValue").text("Sensitivity: " + sens);
			})

			// Render Distance

			$("#renderDistanceSlider").on("change mousemove", function (e) {
				player.renderDistance = $("#renderDistanceSlider")[0].value;
				$("#renderDistanceValue").text("Render Distance: " + player.renderDistance);
			})

			// Chunk Loading Rate

			$("#chunkLoadingRateSlider").on("change mousemove", function (e) {
				player.chunkLoadingRate = $("#chunkLoadingRateSlider")[0].value;
				$("#chunkLoadingRateValue").text("Chunk Loading Rate: " + player.chunkLoadingRate);
			})

			// Statistics

			$("#statsSlider").on("change", function (e) {
				let stats = $("#statsSlider")[0].value;
				if (stats == 1) {
					$("#statsValue").text("Statistics: ON");
					showStats = true;
				} else {
					$("#statsValue").text("Statistics: OFF");
					showStats = false;
				}
			})

			// Shadow Effect

			$("#shadowSlider").on("change", function (e) {
				let shadowEffect = $("#shadowSlider")[0].value;
				if (shadowEffect == 1) {
					$("#shadowValue").text("Shadow Effect: ON");
					light.dir.castShadow = true;
				} else {
					$("#shadowValue").text("Shadow Effect: OFF");
					light.dir.castShadow = false;
				}
			})

			// Cloud Effect

			$("#cloudSlider").on("change", function (e) {
				let cloudEffect = $("#cloudSlider")[0].value;
				if (cloudEffect == 1) {
					$("#cloudValue").text("Cloud Effect: ON");
					light.generateClouds("add");
				} else {
					$("#cloudValue").text("Cloud Effect: OFF");
					light.generateClouds("remove");
				}
			})
		</script>
	</body>
</html>
