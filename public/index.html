
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>BlockCraft</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<meta property="og:title" content="BlockCraft" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://blockcraft.victorwei.com" />
		<meta property="og:image" content="https://blockcraft.victorwei.com/content.png" />
		<meta property="og:description" content="BlockCraft is a WebGL implementation of an infinite procedurally-generated voxel world that runs on the browser. This project originally spawned as a Minecraft Classic clone but has expanded to include multiplayer PvP, crafting, shaders and much more!" />
		<meta name="keywords" content="HTML, CSS, JavaScript, Three.js">
		<meta name="author" content="Victor Wei">

		<link rel="stylesheet" href="style.css">
		<link rel="shortcut icon" type="image/png" href="./favicon.png"/>

		<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3693486377553906"
     crossorigin="anonymous"></script>
	 
	</head>
	<body>
		
		<canvas id="canvas-hud"></canvas>

		<script src="https://cdn.jsdelivr.net/npm/ola"></script>

		<!-- Load Resources -->
		<script src="javascripts/resources/three.js"></script>
		<script src="javascripts/resources/SVGLoader.js"></script>
		<script src="javascripts/resources/socket.io.js"></script>
		<script src="javascripts/resources/stats.min.js"></script>
		<script src="javascripts/resources/perlin.js"></script>
		<script src="javascripts/resources/simplex.js"></script>
		<script src="javascripts/resources/matrix.js"></script>
		<script src="javascripts/resources/sizeof.js"></script>
		<script src="javascripts/resources/jquery.js"></script>
		<script src="javascripts/resources/cookie.js"></script>
		<script src="javascripts/resources/rle-encoding.js"></script>
		<script src="javascripts/resources/GLTFLoader.js"></script>
		<script src="javascripts/resources/Inflate.min.js"></script>
		<script src="javascripts/resources/TextureMerger.js"></script>
		<script src="javascripts/resources/TextGeometry.js"></script>
		<script src="javascripts/resources/FontLoader.js"></script>

		<!-- Load JSON files -->
		<script type="text/javascript" src="changelog.json"></script>
		<script type="text/javascript" src="keymap.json"></script>

		<!-- Load Postprocessing -->
		<script src="javascripts/postprocessing/EffectComposer.js"></script>
		<script src="javascripts/postprocessing/RenderPass.js"></script>
		<script src="javascripts/postprocessing/ShaderPass.js"></script>
		<script src="javascripts/postprocessing/CopyShader.js"></script>

		<!-- Load Classes -->
		<script src="javascripts/classes/World.js"></script>
		<script src="javascripts/classes/Stage.js"></script>
		<script src="javascripts/classes/ChunkManager.js"></script>
		<script src="javascripts/classes/Player.js"></script>
		<script src="javascripts/classes/Stats.js"></script>
		<script src="javascripts/classes/Recipes.js"></script>

		<!-- Load Game Files -->
		<script src="javascripts/auth.js"></script>
		<script src="javascripts/pointerlock.js"></script>
		<script src="javascripts/server.js"></script>
		<script src="javascripts/core.js"></script>
		<script src="javascripts/textures.js"></script>
		<script src="javascripts/client.js"></script>
		<script src="javascripts/input.js"></script>
		<script src="javascripts/helper.js"></script>
		<script src="javascripts/hud.js"></script>
		<script src="javascripts/settings.js"></script>
		

		<div id="blocker">
			<div id="background-image"></div>
			
			<div class="outer-container">
				<div class="container">
					<!-- Menu -->
					<div id="menu" class="tab-container">
						<div id="nav">
							<button class="tablinks" onclick="changeTab(event, 'welcome')" id="welcome-button">Welcome</button>
							<button class="tablinks" onclick="changeTab(event, 'changelog')">Changelog</button>
						</div>

						<div id="welcome" class="tabcontent">
							<!-- <h1 id="title">BlockCraft</h1> -->
							<span>BlockCraft is a WebGL implementation of a procedurally-generated voxel world that runs on the web browser. This project started off as a Minecraft Classic clone but has evolved to include multiplayer PvP, crafting, shaders and much more!</span><br><br>
							<span>BlockCraft is not affiliated with (or supported by) Mojang AB, Minecraft, or Microsoft in any way.</span><br><br>
							<span>Supported browsers: Chrome, Safari, Edge</span><br><br>
							<span>You can view my development journey <a href="https://victorwei.com/blog/blockcraft.pdf">here</a></span><br><br>
							<span>This project is open source and the source code can be accessed through <a href="https://github.com/victoryqwei/blockcraft/" style="color: white" target="_blank">Github</a></span><br><br>
							<span>You can view my other projects <a href="https://victorwei.com" target="_blank">here</a></span><br><br>
							<span></span>This site uses cookies to enhance your experience on BlockCraft. Have fun!</span>
						</div>

						<div id="changelog" class="tabcontent" style="display: none;"></div>
					</div>

					<!-- Server select -->
					<div id="server-select" class="tab-container"style="display:none">
						<div id="nav">
							<button class="tablinks" style="width: 100%;" onclick="changeTab(event, 'server-list')" id="server-button">Server Select</button>
						</div>
		
						<div id="server-list" class="tabcontent">
							<div class="server">
								<p>Welcome to the server select menu! Pick the server you'd like to join or enter a direct connect.</p>
							</div>
							<div id="refresh-servers">Refresh</div>
							
							<div id="server-container"></div>
						</div>
		
						<div id="changelog" class="tabcontent" style="display: none;"></div>
					</div>

					<!-- Settings -->
					<div id="settings" class="tab-container" style="display:none">
						<div id="nav">
							<button class="tablinks" onclick="changeTab(event, 'video-settings')" id="video-button">Video</button>
							<button class="tablinks" onclick="changeTab(event, 'keyboard-settings')">Keyboard</button>
						</div>

						<div id="video-settings" class="tabcontent" style="display: none;">
							<!-- <div class="control-container">
								<span id="fpsValue" class="slider-text">Max FPS: 60</span>
								<input type="range" min="1" max="200" value="60" class="slider" id="fpsSlider" style="position: relative; float: right; width: 50%; height: 20px">
							</div> -->
							<div class="control-container">
								<span id="sensitivityValue" class="slider-text">Sensitivity: 50</span>
								<input type="range" min="1" max="100" value="50" class="slider" id="sensitivitySlider" style="position: relative; float: right; width: 50%; height: 20px">
							</div>
							<div class="control-container">
								<span id="renderDistanceValue" class="slider-text">Render Distance: 8</span>
								<input type="range" min="1" max="32" value="8" class="slider" id="renderDistanceSlider" style="position: relative; float: right; width: 50%; height: 20px">
							</div>
							<div class="control-container">
								<span id="chunkLoadingRateValue" class="slider-text">Chunk Loading Rate: 1</span>
								<input type="range" min="0" max="20" value="1" class="slider" id="chunkLoadingRateSlider" style="position: relative; float: right; width: 50%; height: 20px">
							</div>
							<div class="control-container">
								<span id="fovValue" class="slider-text">FOV: 75</span>
								<input type="range" min="1" max="180" value="75" class="slider" id="fovSlider" style="position: relative; float: right; width: 50%; height: 20px">
							</div>
							<div class="control-container">
								<span id="statsValue" class="slider-text">Statistics: OFF</span>
								<input type="range" min="0" max="1" value="0" class="slider" id="statsSlider" style="position: relative; float: right; width: 40px; height: 20px">
							</div>
							<div class="control-container">
								<span id="shadowValue" class="slider-text">Shadow Effect: OFF</span>
								<input type="range" min="0" max="1" value="0" class="slider" id="shadowSlider" style="position: relative; float: right; width: 40px; height: 20px">
							</div>
							<div class="control-container">
								<span id="cloudValue" class="slider-text">Clouds: ON</span>
								<input type="range" min="0" max="1" value="1" class="slider" id="cloudSlider" style="position: relative; float: right; width: 40px; height: 20px">
							</div>
							<div class="control-container">
								<span id="starsValue" class="slider-text">Stars: ON</span>
								<input type="range" min="0" max="1" value="1" class="slider" id="starsSlider" style="position: relative; float: right; width: 40px; height: 20px">
							</div>
							<div class="control-container">
								<span id="textureValue" class="slider-text">Material Texture:</span>
								<select id="textureSelect" type="select" class="select" style="position: relative; float: right; width: 130px; height: 30px">
									<option value="basic">Basic</option>
									<option value="lambert" selected="selected">Lambert</option>
									<option value="phong">Phong</option>
									<option value="standard">Standard</option>
									<option value="toon">Toon</option>
								</select>
							</div>
							
							<div id="reset-video" class="settings-button">Reset to Default</div>
						</div>

						<div id="keyboard-settings" class="tabcontent" style="display: none;">
						</div>
					</div>
					
					
				</div>
				<!-- User Input and Start Button -->
				<div id ="input-container">
					<input autocomplete="off" id="name-input" class="input" type="text" placeholder="Enter Username" maxlength="20">
					<input autocomplete="off" id="direct-connect-input" class="input" type="text" placeholder="Direct Connect (optional)" maxlength="50" style="display: none;">
					<br />
					<div id="start-button">
						<div id="continue-bar" class="bar menu-button">Continue</div>
						<div id="loading-bar" class="bar menu-button" style="display: none;">
							Connecting to server...
						</div>
						<div id="ingame-bar" class="menu-button" style="display: none;">
							<div id="disconnect-bar" class="bar">
								Disconnect
							</div>
							<div id="return-bar" class="bar">
								Return to game
							</div>
						</div> 
						<div id="disconnecting-bar" class="bar menu-button" style="display: none;">
							Disconnecting...
						</div>
					</div>
				</div>
			</div>

			
		</div>

		<input autocomplete="off" id="chat-input" type="text" placeholder="> Press Enter to Chat" maxlength="100">


		<script>
			$("#welcome-button")[0].click();
			// Prevent right-click
			//document.addEventListener('contextmenu', event => event.preventDefault());
			let cookieExpiryTime = 14; // 14 days
			
			// Change tab
			function changeTab(evt, cityName) {
			  // Declare all variables
			  var i, tabcontent, tablinks;

			  // Get all elements with class="tabcontent" and hide them
			  tabcontent = document.getElementsByClassName("tabcontent");
			  for (i = 0; i < tabcontent.length; i++) {
			    tabcontent[i].style.display = "none";
			  }

			  // Get all elements with class="tablinks" and remove the class "active"
			  tablinks = document.getElementsByClassName("tablinks");
			  for (i = 0; i < tablinks.length; i++) {
			    tablinks[i].className = tablinks[i].className.replace(" active", "");
			  }

			  // Show the current tab, and add an "active" class to the button that opened the tab
			  document.getElementById(cityName).style.display = "block";
			  evt.currentTarget.className += " active";
			}

			// Load the changelog
			for (let change of changelog) {
				let date = change.date;
				let version = change.version;
				let changes = change.changes.split("|");

				let message = $("<span>v" + version + " | " + date + "</span><br><br>");
				$("#changelog").append(message);

				for (let comment of changes) {
					
					let message = $("<span>- " + comment + "</span><br>");
					$("#changelog").append(message);
				}

		        $("#changelog").append($("<br>"));
			}

			// Get cookie username

			let name = getCookie("Name");
			if (name)
				$("#name-input").val(name);

		</script>
	</body>
</html>
